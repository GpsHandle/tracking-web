<mat-drawer-container class="side-nav-container">
    <mat-drawer mode="side" [opened]="true" class="mat-elevation-z3">
        <div class="rpt-nav-device" id = "deviceList">
            <mat-form-field class="rpt-device-filter">
                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Device Filter">
            </mat-form-field>
            <mat-nav-list class="rpt-list-device">
                <mat-list-item *ngFor="let device of deviceList" (click)="selectThisDevice(device)">
                    <div>
                        <span>{{device.name || device.deviceId}}</span>
                    </div>
                </mat-list-item>
            </mat-nav-list>
        </div>
    </mat-drawer>
    <mat-drawer-content>
        <mat-accordion class="rpt-info-board">
            <mat-expansion-panel [expanded]="true" [hideToggle]="true">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <button mat-icon-button (click)="tonggleSidebar($event)">
                            <mat-icon>{{tIcon}}</mat-icon>
                        </button>
                        <span>{{selected.name || selected.deviceId}}</span>
                    </mat-panel-title>
                    <mat-panel-description>
                        <div fxLayout="row" fxLayoutGap="16px" class="rpt-board-timepicker">
                            <mat-form-field (click)="$event.stopPropagation();">
                                <mat-select [(value)]="timerange" (selectionChange)="timerangeChange()">
                                    <mat-option value="2">Last 2 hours</mat-option>
                                    <mat-option value="8">Last 8 hours</mat-option>
                                    <mat-option value="24">Last 1 day</mat-option>
                                    <mat-option value="72">Last 3 days</mat-option>
                                    <mat-option value="custom" disabled>Custom range</mat-option>
                                </mat-select>
                            </mat-form-field>

                        </div>
                        <div align="end">
                            <button mat-icon-button (click)="export($event, 'pdf')"><mat-icon>pdf</mat-icon></button>
                            <button mat-icon-button (click)="export($event, 'xlsx')"><mat-icon>excel</mat-icon></button>
                        </div>
                    </mat-panel-description>
                </mat-expansion-panel-header>
                <mat-divider></mat-divider>

                <ng-template matExpansionPanelContent>
                    <div fxLayout="row" fxLayoutGap="16px">
                        <div fxFlex="20" class="d-rp-stat">
                            <table>
                                <tr>
                                    <td>Distant</td>
                                    <td>{{distance}}</td>
                                </tr>
                                <tr>
                                    <td>Total Events</td>
                                    <td>{{totalEvents}}</td>
                                </tr>
                                <tr>
                                    <td>Fuel consumed</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td>Battery consumed</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td>Average speed</td>
                                    <td>0</td>
                                </tr>
                            </table>
                        </div>
                        <div fxFlex="80">
                            <event-line-chart [eventList]="eventList"></event-line-chart>
                        </div>
                    </div>


                </ng-template>
            </mat-expansion-panel>
        </mat-accordion>

        <mat-tab-group (selectedTabChange)="onTabChanged($event)">
            <mat-tab i18n-label label="Speed Report">
                <rpt-speed [device]="selected.id" [from]="from" [to]="to"></rpt-speed>
            </mat-tab>
            <mat-tab i18n-label label="Parking Report">
                <rpt-parking [device]="selected.id" [from]="from" [to]="to" ></rpt-parking>
            </mat-tab>
            <mat-tab i18n-label label="Geozone Report">
                <app-geozone-report></app-geozone-report>
            </mat-tab>
            <mat-tab i18n-label label="Alert History">
                <app-alert-history></app-alert-history>
            </mat-tab>
        </mat-tab-group>
    </mat-drawer-content>
</mat-drawer-container>
