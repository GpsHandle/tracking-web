<!--Toolbar-->
<mat-toolbar>
    <button mat-button (click)="back()">
        <mat-icon>back</mat-icon>
        <span>Back</span>
    </button>
    <span class="fill-remain-space"></span>
    <div *ngIf="isEdit">
        <button mat-raised-button color="primary" (click)="saveEditRole()">
            <mat-icon>save</mat-icon>
            <span>Save</span>
        </button>
        <button mat-raised-button class="add-role-component-button-cancel" (click)="cancelEditRole()">
            <mat-icon>cancel</mat-icon>
            <span>Cancel</span>
        </button>
    </div>
    <div *ngIf="!isEdit">
        <button mat-button color="primary" (click)="editRole()" [disabled]="(role && role.global)">
            <mat-icon>edit</mat-icon>
            <span i18n>Edit</span>
        </button>
        <button mat-button color="primary" (click)="destroy()" [disabled]="(role && role.global)">
            <mat-icon>delete</mat-icon>
            <span i18n>Delete</span>
        </button>
    </div>
</mat-toolbar>


<!--Content-->
<div fxLayout="column" fxLayout.sm="column">
    <mat-card class="content-card" *ngIf="role">
        <mat-card-title>
            <span *ngIf="!isEdit" i18n>View</span>
            <span *ngIf="isEdit" i18n>Edit</span>
            <span i18n>Role</span>
            <span>#{{role.displayName}}</span>
        </mat-card-title>

        <mat-card-content>
            <form>
                <div fxLayout="column">
                    <table class="full-width">
                        <tr>
                            <td>
                                <mat-form-field class="full-width">
                                    <input matInput placeholder="Role Name" [(ngModel)]="role.displayName" name="role-name" required  [disabled]="!isEdit">
                                </mat-form-field>
                            </td>
                            <td>
                                <table  class="full-width">
                                    <tr>
                                        <td>
                                            <mat-checkbox [(ngModel)]="role.default" name="role-default" [disabled]="!isEdit">Is Default</mat-checkbox>
                                        </td>
                                        <td>
                                            <mat-checkbox disabled="!isAdministrator" [(ngModel)]="role.global" name="role-scope" [disabled]="!isEdit">Is Global</mat-checkbox>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>


                    <table width="100%">
                        <tr>
                            <td>
                                <mat-form-field class="full-width">
                                    <textarea matInput placeholder="Description" [(ngModel)]="role.description" name="description" [disabled]="!isEdit"></textarea>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field class="full-width">
                                    <textarea matInput placeholder="Notes" [(ngModel)]="role.notes" name="notes" [disabled]="!isEdit"></textarea>
                                </mat-form-field>
                            </td>
                        </tr>
                    </table>
                </div>
            </form>
        </mat-card-content>
    </mat-card>

    <perm-basic
            [is_edit]="isEdit"
            [permMapLive]="perm_map_live"
            [permMapHistory]="perm_map_history"
            [permReportSummary]="perm_report_summary"
            [permReportSpeeding]="perm_report_speeding"
            [permReportParking]="perm_report_parking"
            [permReportGeozone]="perm_report_geozone"
            [permAccount]="perm_account"
            [permRole]="perm_role"
            [permDevice]="perm_device"
            [permAlert]="perm_alert"
            [permGeozone]="perm_geozone"
            (change)="permChange($event)"></perm-basic>
    <!--Permissions details for account-->
    <perm-account *ngIf="perm_account>3"
                  [is_edit]="isEdit"
                  [account_acl]="accountAcl"
                  (change)="permItemAccountChange($event)"></perm-account>
    <!--Todo: later change-->
    <perm-device *ngIf="perm_device>3"></perm-device>

    <div *ngIf="showContent==3"> <!--Page.device permission details-->

    </div>
    <div *ngIf="showContent==4"> <!--Page.alert permission details-->

    </div>
    <div *ngIf="showContent==5"> <!--Page.geozone permission details-->

    </div>
</div>