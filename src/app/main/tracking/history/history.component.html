<div fxLayout="column" class="page-history">
    <div fxFlex="50">
        <div id="map2" class="main-map"></div>
    </div>
    <div fxFlex="50" class="history-details">
        <mat-toolbar>
            <mat-form-field>
                <mat-select [(value)]="timerange" (selectionChange)="timeDistanceChange()">
                    <mat-option value="1">Last 1 hour</mat-option>
                    <mat-option value="2">Last 2 hours</mat-option>
                    <mat-option value="8">Last 8 hours</mat-option>
                    <mat-option value="24">Last 1 day</mat-option>
                    <mat-option value="48">Last 2 days</mat-option>
                    <mat-option value="72">Last 3 days</mat-option>
                    <mat-option value="custom">custom</mat-option>
                </mat-select>
            </mat-form-field>
            <div class="his-dev-name">
                <span>Device: </span>
                <span>{{name}}</span>
            </div>
            <span class="fill-remain-space"></span>
            <button mat-button>
                <mat-icon>excel</mat-icon>
                <span>Excel</span>
            </button>
            <button mat-button>
                <mat-icon>pdf</mat-icon>
                <span>PDF</span>
            </button>
        </mat-toolbar>
        <div fxLayout="row" class="history-details-content">
            <div fxFlex="50">
                <div id="chart2"></div>
            </div>
            <div fxFlex="50">
                <div class="history-table">
                    <mat-table [dataSource]="dataSource">
                        <ng-container matColumnDef="deviceName">
                            <mat-header-cell *matHeaderCellDef i18n> Device Name </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.deviceName || row.deviceId}}</mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="location">
                            <mat-header-cell *matHeaderCellDef i18n> Location </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.latitude}}/{{row.longitude}}</mat-cell>
                        </ng-container>
                        <!--ng-container matColumnDef="longitude">
                            <mat-header-cell *matHeaderCellDef i18n> Longitude </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.longitude}}</mat-cell>
                        </ng-container-->
                        <ng-container matColumnDef="altitude">
                            <mat-header-cell *matHeaderCellDef i18n> Altitude </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.altitude}}</mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="heading">
                            <mat-header-cell *matHeaderCellDef i18n> Heading </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.heading}}</mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="speedKPH">
                            <mat-header-cell *matHeaderCellDef i18n> SpeedKPH </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.speedKPH}}</mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="address">
                            <mat-header-cell *matHeaderCellDef i18n> Address </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.address}}</mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="status">
                            <mat-header-cell *matHeaderCellDef i18n>Status</mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.status}}</mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="timestamp">
                            <mat-header-cell *matHeaderCellDef i18n> Date/Time </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.timestamp | date: 'short'}}</mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="age">
                            <mat-header-cell *matHeaderCellDef i18n> Age </mat-header-cell>
                            <mat-cell *matCellDef="let row">{{row.timestamp | timeDistance}}</mat-cell>
                        </ng-container>


                        <mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></mat-header-row>
                        <mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="{selected: row.selected}" (click)="select(row)"></mat-row>
                    </mat-table>
                </div>
            </div>
        </div>
    </div>
</div>
